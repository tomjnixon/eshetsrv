{erl_opts, [debug_info]}.

{deps, [
        {eshet, {git, "https://github.com/tomjnixon/eshet.git",
                 {branch, "master"}}},
        {cowboy, "2.7.0"},
        {ranch, "1.7.1"},
        {jiffy, "1.0.5"},
        {msgpack, {git, "https://github.com/tomjnixon/msgpack-erlang.git",
                   {branch, "pack_unpack_binary"}}},
        {systemd, "0.6.2"}
       ]}.

{relx, [
        {release,
         {eshetsrv_release, "1"},
         [eshet, eshetsrv, eshetproto, eshethttp, sasl, runtime_tools, systemd_support]},
        {extended_start_script, true},
        {dev_mode, true},
        {include_erts, false},
        {vm_args, "config/default/vm.args"}
       ]}.

{profiles, [
            {test, [{deps, [{gun, "1.3.3"}]}]},
            {prod, [{relx, [{dev_mode, false},
                            {include_erts, true},
                            {vm_args, "config/prod/vm.args"}
                           ]}
                   ]}
           ]}.

{dist_node, [
    {setcookie, eshet},
    {name, 'eshet'}
]}.

{project_plugins, [erlfmt]}.
{erlfmt, [
    write,
    {print_width, 100},
    {files, ["apps/*/{src,include,test}/*.{hrl,erl,app.src}", "rebar.config"]}
]}.
